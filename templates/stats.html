<!DOCTYPE html>
<html>
<head>
    <title>Statistiques</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>R√©sultats du quiz</h2>
    {% for nom, data in data.items() %}
        <h3>R√©ponses de {{ nom }}</h3>
        <ul>
            {% for i in range(8) %}
                <li>
                    <strong>{{ questions[i] }}</strong><br>
                    ‚úÖ R√©ponse donn√©e :
                    <span style="color: {{ 'green' if data['answers'][i] == correct[i] else 'red' }}">
                        {{ data['answers'][i] or 'Non r√©pondu' }}
                    </span><br>
                    üìå Bonne r√©ponse : {{ correct[i] }}<br>
                    üìù Explication : {{ explications[i] }}
                </li>
            {% endfor %}
        </ul>
    {% endfor %}

    <h2>Diagrammes</h2>
    {% for i in range(8) %}
        <h3>{{ questions[i] }}</h3>
        <canvas id="chart{{ i }}" width="400" height="200"></canvas>
        <script>
            const ctx{{ i }} = document.getElementById('chart{{ i }}').getContext('2d');
            const chart{{ i }} = new Chart(ctx{{ i }}, {
                type: 'bar',
                data: {
                    labels: {{ choix[i]|map('slice', 0, 1)|list }},
                    datasets: [{
                        label: 'Nombre de r√©ponses',
                        data: [
                            {% for c in ['A', 'B', 'C', 'D'] %}
                                {{ data.values()|map(attribute='answers')|map('getitem', i)|select('equalto', c)|list|length }},
                            {% endfor %}
                        ],
                        backgroundColor: ['#4caf50', '#f44336', '#2196f3', '#ff9800']
                    }]
                }
            });
        </script>
    {% endfor %}
</body>
</html>
