<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Statistiques</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .correct {
            color: green;
            font-weight: bold;
        }
        .incorrect {
            color: red;
            font-weight: bold;
        }
        .question-container {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <h1>Statistiques du Quiz</h1>

    {% for nom, data in data.items() %}
        <div class="question-container">
            <h2>{{ nom }}</h2>
            <ul>
                {% for i in range(8) %}
                    <li>
                        <strong>{{ questions[i] }}</strong><br>
                        <!-- Affichage de la rÃ©ponse donnÃ©e avec la couleur -->
                        <span class="{% if data.answers[i] == correct[i] %}correct{% else %}incorrect{% endif %}">
                            RÃ©ponse donnÃ©e : {{ data.answers[i] }}
                        </span><br>
                        <!-- Affichage de la bonne rÃ©ponse avec explication -->
                        <span class="correct">
                            âœ… Bonne rÃ©ponse : {{ correct[i] }}<br>
                        </span>
                        <span>
                            ðŸ“˜ Explication : {{ explications[i] }}
                        </span><br>
                        <canvas id="chart{{ i }}{{ loop.index }}" width="400" height="200"></canvas><br><br>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <script>
            // Affichage des diagrammes pour chaque question
            const ctx{{ loop.index }} = document.getElementById('chart{{ i }}{{ loop.index }}').getContext('2d');
            const counts{{ loop.index }} = { A: 0, B: 0, C: 0, D: 0 };
            {% for nom, data in data.items() %}
                counts{{ loop.index }}[`{{ data.answers[i] }}`]++;  // Compte les rÃ©ponses pour chaque question
            {% endfor %}
            new Chart(ctx{{ loop.index }}, {
                type: 'bar',
                data: {
                    labels: ['A', 'B', 'C', 'D'],
                    datasets: [{
                        label: 'Nombre de rÃ©ponses',
                        data: [
                            counts{{ loop.index }}.A,
                            counts{{ loop.index }}.B,
                            counts{{ loop.index }}.C,
                            counts{{ loop.index }}.D
                        ],
                        backgroundColor: [
                            '#3498db', '#e67e22', '#2ecc71', '#e74c3c'
                        ]
                    }]
                },
                options: {
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        </script>

    {% endfor %}
</body>
</html>
